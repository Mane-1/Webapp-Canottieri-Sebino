<div class="row">
    <div class="col-md-6 mb-3"><label for="first_name" class="form-label">Nome*</label><input type="text" class="form-control" name="first_name" value="{{ user.first_name or '' }}" required></div>
    <div class="col-md-6 mb-3"><label for="last_name" class="form-label">Cognome*</label><input type="text" class="form-control" name="last_name" value="{{ user.last_name or '' }}" required></div>
</div>
<div class="row">
    <div class="col-md-6 mb-3"><label for="username" class="form-label">Username*</label><input type="text" class="form-control" name="username" value="{{ user.username or '' }}" required></div>
    <div class="col-md-6 mb-3"><label for="password" class="form-label">Password{% if not user %}*{% endif %}</label><input type="password" class="form-control" name="password" {% if not user %}required{% endif %}><div class="form-text">{% if user %}Lasciare vuoto per non modificare.{% endif %}</div></div>
</div>
<div class="row">
    <div class="col-md-6 mb-3"><label for="email" class="form-label">Email</label><input type="email" class="form-control" name="email" value="{{ user.email or '' }}"></div>
    <div class="col-md-6 mb-3"><label for="phone_number" class="form-label">Telefono</label><input type="tel" class="form-control" name="phone_number" value="{{ user.phone_number or '' }}"></div>
</div>
<div class="row">
    <div class="col-md-6 mb-3"><label for="date_of_birth" class="form-label">Data di Nascita*</label><input type="date" class="form-control" name="date_of_birth" value="{{ user.date_of_birth.strftime('%Y-%m-%d') if user.date_of_birth else '' }}" required></div>
    <div class="col-md-6 mb-3"><label for="tax_code" class="form-label">Codice Fiscale</label><input type="text" class="form-control" name="tax_code" value="{{ user.tax_code or '' }}"></div>
</div>
<div class="row">
    <div class="col-md-6 mb-3"><label for="membership_date" class="form-label">Data Tesseramento</label><input type="date" class="form-control" name="membership_date" value="{{ user.membership_date.strftime('%Y-%m-%d') if user.membership_date else '' }}"></div>
    <div class="col-md-6 mb-3"><label for="certificate_expiration" class="form-label">Scadenza Certificato</label><input type="date" class="form-control" name="certificate_expiration" value="{{ user.certificate_expiration.strftime('%Y-%m-%d') if user.certificate_expiration else '' }}"></div>
</div>
<div class="mb-3"><label for="address" class="form-label">Indirizzo</label><input type="text" class="form-control" name="address" value="{{ user.address or '' }}"></div>
<div class="row">
     <div class="col-md-6 mb-3"><label for="enrollment_year" class="form-label">Anno Iscrizione</label><input type="number" class="form-control" name="enrollment_year" value="{{ user.enrollment_year or '' }}" placeholder="Es. 2024"></div>
     <div class="col-md-6 mb-3">
        <label for="manual_category" class="form-label">Categoria</label>
        <select class="form-select" name="manual_category" id="manual_category">
            <option value="" {% if not user.manual_category %}selected{% endif %}>Automatica</option>
            {% for cat in all_categories %}
            <option value="{{ cat.nome }}" {% if user.manual_category == cat.nome %}selected{% endif %}>{{ cat.nome }}</option>
            {% endfor %}
        </select>
        <div class="form-text">Seleziona una categoria per impostarla manualmente.</div>
     </div>
</div>
<div class="mb-3">
    <label class="form-label">Ruoli*</label>
    <div>
        {% for role in all_roles %}
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" name="roles_ids" id="role_{{ role.id }}" value="{{ role.id }}" {% if role.id in user_role_ids %}checked{% endif %}>
            <label class="form-check-label" for="role_{{ role.id }}">{{ role.name.title() }}</label>
        </div>
        {% endfor %}
    </div>
</div>